# Описание
Ядро финансовой системы будет отделено от бекенда самой системы.
Ядро - это чисто финансовые операции без понятия событий и других терминов предметной области.

- Обязательные элементы любой финансовой системы:
- Обработка платежа
- Обработка рефандов
- Создания подписки
- Сбор логов абсолютно всех действий
- Предоставление отчетов

# Очередь платежей
Все платежи должны обрабатываться исключительно в очереди.
Никаких паралельных обработок.
Иначе могут быть коллизии.
В будущем, когда один сервер перестанет справлятся - то можно будет делать очереди для каждого клиента свои... Но там тоже могут быть колизии.
Так что в начале делаем 1 общую очередь

# Обработка платежа
Система должна предоставлять возможность выполнения платежа (с предварительным резервированием) используя:
- апи ключи к платежной системе
- финансовые данные плательщика
- сумму операции

Сумма платежа по факту может превышать сумму, которая была зарезервирована. При невозможности снять сумму большое - снять сумму резерва а остаток (по возможности) снять позже.
Сама операция должна быть выполнена в транзакции. Если в процессе произошла ошибка - нужно откатить измененные данные.
